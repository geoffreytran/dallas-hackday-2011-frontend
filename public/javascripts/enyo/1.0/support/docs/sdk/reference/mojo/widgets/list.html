<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="mojo.widget.list">
      Mojo.Widget.List
    </h1>
    <h2 id="namespace-detail">
      Namespace Detail
    </h2>
    <h3 id="overview">
      Overview
    </h3>
    <p>
      The List is the most common and possibly the most powerful Mojo widget. Objects are rendered into list items using provided HTML templates, and may be variable in height and/or include other widgets. Lists can be static, with the list items being provided to the widget directly as an array, or they can be dynamic, with the application providing a callback function that is invoked as additional items are needed for display. Lists can be manipulated in place, with the framework handling deletion, reordering, and addition functions for the application.
    </p>
    <h3 id="declaration">
      Declaration
    </h3>
    <blockquote>
      <pre>
<code>&lt;div x-mojo-element=&quot;List&quot; id=&quot;listId&quot; class=&quot;listClass&quot; name=&quot;listName&quot;&gt;&lt;/div&gt;
</code>
</pre>
    </blockquote>
    <p>
      In addition, a list item template is required. This declared in a separate file, and referenced in the &quot;listTemplate&quot; attribute property.
    </p>
    <blockquote>
      <pre>
<code>&lt;div class=&quot;row textfield&quot; x-mojo-tap-highlight=&quot;momentary&quot;&gt;
  &lt;div class=&quot;title&quot;&gt;
      #{data}
  &lt;/div&gt;
&lt;/div&gt; 
</code>
</pre>
    </blockquote>
    <table border="1">
      <tbody>
        <tr>
          <th width="20%">
            Properties
          </th>
          <th width="10%">
            Required
          </th>
          <th width="10%">
            Value
          </th>
          <th width="60%">
            Description
          </th>
        </tr>
        <tr>
          <td>
            x-mojo-element
          </td>
          <td>
            Yes
          </td>
          <td>
            &quot;List&quot;
          </td>
          <td>
            Declares the widget as type &quot;List&quot;.
          </td>
        </tr>
        <tr>
          <td>
            id
          </td>
          <td>
            Yes
          </td>
          <td>
            Any string
          </td>
          <td>
            Identifies the widget element for use when instantiating or rendering. Should be unique in the document.
          </td>
        </tr>
        <tr>
          <td>
            class
          </td>
          <td>
            No
          </td>
          <td>
            Any string
          </td>
          <td>
            Specifies a unique class to override the framework's styles.
          </td>
        </tr>
        <tr>
          <td>
            name
          </td>
          <td>
            No
          </td>
          <td>
            Any string
          </td>
          <td>
            A unique name for the list widget. Generally used in templates.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="events">
      Events
    </h3>
    <blockquote>
      <pre>
<code>this.controller.listen(this.controller.get(&quot;listId&quot;), Mojo.Event.listTap,
  this.handleUpdate);
</code>
</pre>
    </blockquote>
    <table border="1">
      <tbody>
        <tr>
          <th>
            Event
          </th>
          <th>
            Value
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            Mojo.Event.listChange
          </td>
          <td>
            {model:this.controller.model, item:dataObj, index: index + this.renderOffset, originalEvent:event}
          </td>
          <td>
            <p>
              Button has been tapped.
            </p>
          </td>
        </tr>
        <tr>
          <td>
            Mojo.Event.listTap
          </td>
          <td>
            event.item
          </td>
          <td></td>
        </tr>
        <tr>
          <td>
            Mojo.Event.listAdd
          </td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>
            Mojo.Event.listDelete
          </td>
          <td>
            event.item<br>
            event.index
          </td>
          <td></td>
        </tr>
        <tr>
          <td>
            Mojo.Event.listReorder
          </td>
          <td>
            event.item<br>
            event.toIndex<br>
            event.fromIndex
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <h3 id="instantiation">
      Instantiation
    </h3>
    <blockquote>
      <pre>
<code>this.controller.setupWidget(&quot;listId&quot;,
  this.attributes = {
      itemTemplate: &quot;listscene/static-list-entry&quot;,
      listTemplate: &quot;listscene/static-list-container&quot;,
      addItemLabel: &quot;Add ...&quot;,
      swipeToDelete: true,
      reorderable: true,
      emptyTemplate:&quot;list/emptylist&quot;
  },
  this.model = {
      listTitle: &quot;List Title&quot;,
      items : [
          {data: &quot;Item 1&quot;},
          {data: &quot;Item 2&quot;},
          {data: &quot;Item 3&quot;},
          {data: &quot;Item 4&quot;},
          {data: &quot;Item 5&quot;},
          {data: &quot;Item 6&quot;},
      ]
  }
); 
</code>
</pre>
    </blockquote>
    <h3 id="attribute-properties">
      Attribute Properties
    </h3>
    <table border="1">
      <tbody>
        <tr>
          <th width="20%">
            Name
          </th>
          <th width="10%">
            Type
          </th>
          <th width="10%">
            Req'd
          </th>
          <th width="10%">
            Default
          </th>
          <th width="50%">
            Description
          </th>
        </tr>
        <tr>
          <td>
            addItemLabel
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            If defined, a special &quot;add&quot; item will be appended to the list and taps on this item will generate a &quot;Mojo.Event.listAdd&quot; event. The string is used to label the entry. If null, then it will default to &quot;+Add&quot;.
          </td>
        </tr>
        <tr>
          <td>
            autoconfirmDelete
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            true
          </td>
          <td>
            If false, delete swipes will post a &quot;delete/undo&quot; button pair. If true, deletes will be made immediately after swiping.
          </td>
        </tr>
        <tr>
          <td>
            deletedProperty
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            &quot;deleted&quot;
          </td>
          <td>
            Name of the item object property in which to store the deleted status of an item.
          </td>
        </tr>
        <tr>
          <td>
            dividerFunction
          </td>
          <td>
            Function
          </td>
          <td>
            No
          </td>
          <td></td>
          <td>
            Function to create divider elements.
          </td>
        </tr>
        <tr>
          <td>
            dividerTemplate
          </td>
          <td>
            Function
          </td>
          <td>
            No
          </td>
          <td>
            list-divider
          </td>
          <td>
            Function to format a divider.
          </td>
        </tr>
        <tr>
          <td>
            dragDatatype
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            Used for drag&amp;drop reordering. If specified, will allow items to be dragged from one list to another of the same data type.
          </td>
        </tr>
        <tr>
          <td>
            emptyTemplate
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            default template
          </td>
          <td>
            File path relative to the app folder for template for empty list; this is only implemented for lists loaded via the itemsCallback property.
          </td>
        </tr>
        <tr>
          <td>
            fixedHeightItems
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            false
          </td>
          <td>
            If true, list widget will apply optimizations for fixed height items.
          </td>
        </tr>
        <tr>
          <td>
            formatters
          </td>
          <td>
            Function
          </td>
          <td>
            No
          </td>
          <td></td>
          <td>
            Object functions to format list entries based on model properties.
          </td>
        </tr>
        <tr>
          <td>
            hasNoWidgets
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            false
          </td>
          <td>
            Specify true for this if the list has no child widgets; allows for faster processing of simple lists; in versions of the List widget where this property does not exist, behavior will be as if hasNoWidgets was set to false.
          </td>
        </tr>
        <tr>
          <td>
            initialAverageRowHeight
          </td>
          <td>
            Integer
          </td>
          <td>
            No
          </td>
          <td></td>
          <td>
            Initial value used for average height estimation.
          </td>
        </tr>
        <tr>
          <td>
            itemsCallback
          </td>
          <td>
            Function
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            Items will be loaded as needed by calling this function of the form: callback(widget, offset, count)
          </td>
        </tr>
        <tr>
          <td>
            itemsProperty
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            items
          </td>
          <td>
            Model property for the items list.
          </td>
        </tr>
        <tr>
          <td>
            itemTemplate
          </td>
          <td>
            String
          </td>
          <td>
            Yes
          </td>
          <td></td>
          <td>
            File path relative to the app folder for the item template.
          </td>
        </tr>
        <tr>
          <td>
            listTemplate
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td></td>
          <td>
            File path relative to the app folder for the container template. The container template must contain #{-listElements} or not items will be rendered.
          </td>
        </tr>
        <tr>
          <td>
            lookahead
          </td>
          <td>
            Integer
          </td>
          <td>
            No
          </td>
          <td>
            15
          </td>
          <td>
            Number of items to fetch ahead when loading new items.
          </td>
        </tr>
        <tr>
          <td>
            nullItemTemplate
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            default template
          </td>
          <td>
            File path relative to app folder for template for items that are rendered before loading.
          </td>
        </tr>
        <tr>
          <td>
            onItemRendered
          </td>
          <td>
            Function
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            Called each time an item is rendered into the DOM with these arguments: (listWidget, itemModel, itemNode)
          </td>
        </tr>
        <tr>
          <td>
            preventDeleteProperty
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td></td>
          <td>
            If specified, the item models will be checked for this property, and swipeToDelete will be ignored on that item if the item model's property is truthy.
          </td>
        </tr>
        <tr>
          <td>
            renderLimit
          </td>
          <td>
            Integer
          </td>
          <td>
            No
          </td>
          <td>
            20
          </td>
          <td>
            Max number of items to render at once; increase this if the UI overruns the list boundaries.
          </td>
        </tr>
        <tr>
          <td>
            reorderable
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            false
          </td>
          <td>
            If true, list entries can be reordered by drag and drop.
          </td>
        </tr>
        <tr>
          <td>
            swipeToDelete
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            false
          </td>
          <td>
            If true, list entries can be deleted with a swipe.
          </td>
        </tr>
        <tr>
          <td>
            uniquenessProperty
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            Name of an item model property which can be used to uniquely identify items. If specified, List will maintain a hash of swiped items instead of setting a deleted property, preventing the app from having to persist the deleted property.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="model-properties">
      Model Properties
    </h3>
    <table border="1">
      <tbody>
        <tr>
          <th width="20%">
            Name
          </th>
          <th width="10%">
            Type
          </th>
          <th width="10%">
            Req'd
          </th>
          <th width="10%">
            Default
          </th>
          <th width="50%">
            Description
          </th>
        </tr>
        <tr>
          <td>
            items
          </td>
          <td>
            Array
          </td>
          <td>
            No
          </td>
          <td>
            none
          </td>
          <td>
            A list of objects to display in the list. Required unless the itemsCallback property is set as an Attribute property.
          </td>
        </tr>
        <tr>
          <td>
            disabled
          </td>
          <td>
            Boolean
          </td>
          <td>
            No
          </td>
          <td>
            false
          </td>
          <td>
            Model property name for disabled.
          </td>
        </tr>
        <tr>
          <td>
            label
          </td>
          <td>
            String
          </td>
          <td>
            No
          </td>
          <td>
            null
          </td>
          <td>
            Model property name for label.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="methods">
      Methods
    </h3>
    <p>
      To invoke a method on a widget, use the scene controller's <code>get</code> method for the desired widget, and append <code>mojo</code> followed by the method.
    </p>
    <p>
      Example:
    </p>
    <blockquote>
      <pre>
<code>this.controller.get('myWidget').mojo.getValue()
</code>
</pre>
    </blockquote>
    <table border="1">
      <tbody>
        <tr>
          <th>
            Method
          </th>
          <th>
            Arguments
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            focusItem
          </td>
          <td>
            itemModel, focusSelector
          </td>
          <td>
            Focus the item designated by the item model; optionally pass in the focusSelector to focus a specific element within the item.
          </td>
        </tr>
        <tr>
          <td>
            getItemByNode
          </td>
          <td>
            node
          </td>
          <td>
            Returns the item model associated with the list item containing the given node, if any. Returns undefined if not.
          </td>
        </tr>
        <tr>
          <td>
            getLength
          </td>
          <td></td>
          <td>
            Returns the current length of the list.
          </td>
        </tr>
        <tr>
          <td>
            getLoadedItemRange
          </td>
          <td></td>
          <td>
            Returns a hash with offset &amp; limit properties indicating the range of currently loaded item models (or items which have been requested). This is sometimes used on the service side to optimize subscription data.
          </td>
        </tr>
        <tr>
          <td>
            getMaxLoadedItems
          </td>
          <td></td>
          <td>
            Returns the maximum number of loaded items the list will maintain in its local cache. Function has no affect when the list size != 0.
          </td>
        </tr>
        <tr>
          <td>
            getNodeByIndex
          </td>
          <td>
            index
          </td>
          <td>
            Return top level node for the list item of the given index. Returns undefined if the item does not exist or is not currently rendered.
          </td>
        </tr>
        <tr>
          <td>
            invalidateItems
          </td>
          <td>
            offset, limit
          </td>
          <td>
            Causes the given items to be reloaded (if currently loaded). If limit is unspecified, causes all items after 'offset' to be invalidated.
          </td>
        </tr>
        <tr>
          <td>
            noticeAddedItems
          </td>
          <td>
            offset, items (array)
          </td>
          <td>
            Inserts the given array of items into the list at the given offset.If list items are dynamically loaded, this may cause some to be kicked out of the cache. Calling this API will not cause a property-change event to be fired.
          </td>
        </tr>
        <tr>
          <td>
            noticeRemovedItems
          </td>
          <td>
            offset, limit
          </td>
          <td>
            Removes items from the list beginning at the given offset, and continuing for 'limit' items. If list items are dynamically loaded, this may cause new ones to be requested. Calling this API will not cause a property-change event to be fired.
          </td>
        </tr>
        <tr>
          <td>
            noticeUpdatedItems
          </td>
          <td>
            offset, items (array)
          </td>
          <td>
            Causes the given items to be replaced and re-rendered. Items provided past the current end of the list will cause the length to grow. MUST pass an array.
          </td>
        </tr>
        <tr>
          <td>
            revealItem
          </td>
          <td>
            index, animate (boolean)
          </td>
          <td>
            Attempts to scroll the scene to reveal the item with the given index. May behave poorly when working with variable height list items which are not currently loaded, since we can't accurately predict the height of the final rendered content.
          </td>
        </tr>
        <tr>
          <td>
            setLength
          </td>
          <td>
            length
          </td>
          <td>
            Call to set the overall length of the list. This function will set the limit on what range of items may be requested, but will generally not invalidate any existing items or request any new ones. It MAY request new items when the currently loaded items window is either not full, or the length change causes the items window to move. The latter case can occur if the length change causes the window to be &quot;out of bounds&quot;, or if it would ideally be positioned past the end of the list.
          </td>
        </tr>
        <tr>
          <td>
            setLengthAndInvalidate
          </td>
          <td>
            length
          </td>
          <td>
            Behaves like setLength, except that all currently loaded items are invalidated. For lazily loaded lists, this API will result in a request for a whole window of items. Note that items are invalidated even when the length of the list does not actually change.
          </td>
        </tr>
        <tr>
          <td>
            showAddItem
          </td>
          <td>
            boolean
          </td>
          <td>
            Shows the &quot;add item&quot; in the list.
          </td>
        </tr>
      </tbody>
    </table>
		</div>
	</body>
</html>