<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="email">
      Email
    </h1>
    <p>
      You can use the <a href="/reference/services/application-manager.html">Application Manager's</a> <code>open</code> method to bring up the Email application in compose view and, optionally, pre-populate the message with recipient addresses, subject, body, and attachments.
    </p>
    <p>
      The URI for this service call is:
    </p>
    <blockquote>
      <pre>
<code> com.palm.applicationManager/open
</code>
</pre>
    </blockquote>
    <hr>
    <h2 id="open">
      open
    </h2>
    <p>
      There are two ways to bring up the Email application in compose view:
    </p>
    <ol style="list-style-type: decimal">
      <li>
        <p>
          Using a standard &quot;mailto:&quot; URI. Use only the <code>target</code> parameter for this.
        </p>
      </li>
      <li>
        <p>
          Pre-populate message fields with subject, body, attachments and recipient addresses. For this, use the <code>id</code> and <code>params</code> fields together.
        </p>
      </li>
    </ol>
    <p>
      (Note that you can also bring up the Email application into the default view using the &quot;launch&quot; method. See the Services sample code for an illustration of this technique.)
    </p>
    <h3 id="syntax">
      Syntax
    </h3>
    <pre>
{
    target : string,
    id     : string,
    params: {
       account : string,
       summary : string,
       text    : string,
       recipients: [{
           type           : string,
           role           : int,
           value          : string,
           contactDisplay : string
        }],
       attachments : [{
           fullPath    : string,
           displayName : string,
           mimeType    : string
       }],      
}       
</pre>
    <h3 id="parameters">
      Parameters
    </h3>
    <table border="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            target
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            A &quot;mailto:&quot; URI formatted as specified in RFC2368. Launches the Email application to the compose view with a &quot;mailto:&quot; URI. Required if not using id/params.
          </td>
        </tr>
        <tr>
          <td>
            id
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Set to &quot;com.palm.app.email&quot;. Required if not using <code>target</code>.
          </td>
        </tr>
        <tr>
          <td>
            params
          </td>
          <td>
            No
          </td>
          <td>
            object
          </td>
          <td>
            Parameter object. Required if not using <code>target</code>.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            account
          </td>
          <td>
            No
          </td>
          <td>
            integer
          </td>
          <td>
            ID of account sending email. If not specified, the default account is used. You can use the <code>accountList</code> Account API to retrieve an account list.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            summary
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Subject line text.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            text
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Body text.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            attachments
          </td>
          <td>
            No
          </td>
          <td>
            object array
          </td>
          <td>
            Array of attachment objects. See fields below.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            fullPath
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Full path and file name of attachment. Required for each attachment.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            displayName
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Attachment display name.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            mimeType
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Attachment's mime type.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            recipients
          </td>
          <td>
            No
          </td>
          <td>
            object array
          </td>
          <td>
            Array of recipient objects. See fields below.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            contactDisplay
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Recipient display name.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            role
          </td>
          <td>
            No
          </td>
          <td>
            integer
          </td>
          <td>
            Recipient type:
            <ul>
              <li>1 = To
              </li>
              <li>2 = CC
              </li>
              <li>3 = BCC
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            type
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Set to &quot;email&quot;.
          </td>
        </tr>
        <tr>
          <td style="padding-left:60px">
            value
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Recipient's email address.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="examples">
      Examples
    </h3>
    <p>
      <strong>luna-send example using &quot;mailto&quot;</strong>
    </p>
    <pre>
luna-send -n 1  luna://com.palm.applicationManager/open '{ "target": "mailto: someguy@somewebsite.com"}'
{ "processId": "success", "returnValue": true }
</pre>
    <p>
      <strong>Enyo example using &quot;mailto&quot;</strong>
    </p>
    <pre>
. . .
{
    name: "openEmailCall",
    kind: "PalmService",
    service: "palm://com.palm.applicationManager/",
    method: "open",
    onSuccess: "openEmailSuccess",
    onFailure: "openEmailFailure",
    onResponse: "gotResponse",
    subscribe: true
},
. . .

openEmailSuccess : function(inSender, inResponse) {
    enyo.log("Open email success, results=" + enyo.json.stringify(inResponse));
},
openEmailFailure : function(inSender, inResponse) {
    enyo.log("Open email failure, results=" + enyo.json.stringify(inResponse));
},
sendEmail : function(inSender, inResponse)
{
    this.$.openEmailCall.call({"target": "mailto: holeeSmokes@batman.com"});
}
</pre>
    <p>
      <strong>Enyo example using &quot;id&quot; and &quot;params&quot;</strong>
    </p>
    <pre>
. . .
{
    name: "openEmailCall",
    kind: "PalmService",
    service: "palm://com.palm.applicationManager/",
    method: "open",
    onSuccess: "openEmailSuccess",
    onFailure: "openEmailFailure",
    onResponse: "gotResponse",
    subscribe: true
},
. . .

openEmailSuccess : function(inSender, inResponse) {
    enyo.log("Open email success, results=" + enyo.json.stringify(inResponse));
},
openEmailFailure : function(inSender, inResponse) {
    enyo.log("Open email failure, results=" + enyo.json.stringify(inResponse));
},
sendEmail : function(inSender, inResponse)
{
    var params =  {
        "summary":"Not working out",
        "text":"Not u, me; passion gone, u deserve better. C u when I c u. lol. PS. Give my resume to ur HR, thx", 
        "recipients":[{"type": "email",
            "contactDisplay":"Sal Manilla", 
            "role":1, 
            "value":"chesterfields99@hotmail.com"}],
        "attachments": [{"fullPath":"/media/internal/MyResume.doc", 
            "displayName":"My Resume"}]
    };
    this.$.openEmailCall.call({"id": "com.palm.app.email", "params":params});
}  
</pre>
    <p>
      <strong>Mojo example using &quot;mailto&quot;</strong>
    </p>
    <pre>
this.controller.serviceRequest("palm://com.palm.applicationManager", {
      method:"open",
      parameters:{
          "target": "mailto: address@email.com"
      },
      onSuccess : function (e){ Mojo.Log.info("Open success, results="+JSON.stringify(e)); },
      onFailure : function (e){ Mojo.Log.info("Open failure, results="+JSON.stringify(e)); }    
});
</pre>
    <p>
      <strong>Mojo example using &quot;id&quot; and &quot;params&quot;</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.applicationManager/', {
    method: 'open',
    parameters: {
        "id": "com.palm.app.email", 
        "params": {
            "summary":"Attention mateys!",
            "text":"Yo ho ho and a bottle of rum", 
            "recipients":[{"type": "email",
                "contactDisplay":"Sir Lunchalot", 
                "role":1,
                "value":"chesterfields99@hotmail.com"}], 
            "attachments": [{"fullPath":"/media/internal/tconfig.txt", 
                "displayName":"tconfig", 
                "mimeType":"text/plain"}]
            }
        },
        onSuccess : function (e){ Mojo.Log.info("Open success, results="+JSON.stringify(e)); },
        onFailure : function (e){ Mojo.Log.info("Open failure, results="+JSON.stringify(e)); }
    });
</pre>
    <p>
      <strong>Success</strong>
    </p>
    <pre>
Open success, results={"processId":"success","returnValue":true}
</pre>
		</div>
	</body>
</html>