<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="activity-manager-data-types">
      Activity Manager Data Types
    </h1>
    <table border="1">
      <thead>
        <tr>
          <th>
            Data type
          </th>
          <th>
            Description
          </th>
          <th>
            Ref'd by
          </th>
          <th>
            APIs
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            Activity object.
          </td>
          <td>
            &#160;
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#create">create</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#ActivityEvent">ActivityEvent</a>
          </td>
          <td>
            Activity event notification object sent to Activity subscribers.
          </td>
          <td>
            &#160;
          </td>
          <td>
            &#160;
          </td>
        </tr>
        <tr>
          <td>
            <a href="#CallbackProperty">Activity Manager Callback Property</a>
          </td>
          <td>
            Additional object passed to an Activity's callback method.
          </td>
          <td>
            &#160;
          </td>
          <td>
            &#160;
          </td>
        </tr>
        <tr>
          <td>
            <a href="#Callbacks">Callbacks</a>
          </td>
          <td>
            Callback method object.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#complete">complete</a>
          </td>
        </tr><!-- <tr><td><a href="#NetworkFlow">NetworkFlow</a></td>
<td>Details a network exchange&mdash;protocol, source and destination IP addresses, and ports.</td>
<td><a href="#Activity">Activity</a></td>
<td>&nbsp;</td>
</tr> -->
        <tr>
          <td>
            <a href="#Parent">Parent</a>
          </td>
          <td>
            Activity parent's app ID or service ID.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            &#160;
          </td>
        </tr>
        <tr>
          <td>
            <a href="#Requirements">Requirements</a>
          </td>
          <td>
            Prerequisites that must be met before an Activity can run.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#complete">complete</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#Schedule">Schedule</a>
          </td>
          <td>
            Activity's time-based requirements.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#complete">complete</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#State">State</a>
          </td>
          <td>
            Activity state string.
          </td>
          <td>
            <a href="#Activity">Activity</a><br>
            <a href="#ActivityEvent">ActivityEvent</a>
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#monitor">monitor</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#Triggers">Triggers</a>
          </td>
          <td>
            Event that must occur before Activity can run.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            <a href="/reference/services/activity-manager.html#complete">complete</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#Type">Type</a>
          </td>
          <td>
            Details how the Activity is handled— foreground, background, pauseable, cancelable, etc.
          </td>
          <td>
            <a href="#Activity">Activity</a>
          </td>
          <td>
            &#160;
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <a name="Activity" id="Activity">&#160;</a>
    </p>
    <hr>
    <h2 id="activity">
      Activity
    </h2>
    <p>
      Represents everything about an Activity—name, type, state, requirements, schedule, trigger, callback, id, creator, adopters, processes, flows, and associations.
    </p>
    <h3 id="schema">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  //** The following are Activity creator specified attributes
  
  &quot;name&quot;         :  string,
  &quot;description&quot;  :  string,
  &quot;type&quot;         :  Type object,
  &quot;requirements&quot; :  Requirements object,
  &quot;schedule&quot;     :  Schedule object,
  &quot;trigger&quot;      :  Trigger object,
  &quot;callback&quot;     :  Callback object,
  
  //** The following are AM maintained read-only attributes.
  &quot;metadata&quot;     : any object,
  &quot;activityId&quot;   : int,
  &quot;creator&quot;      : Parent object,
  &quot;parent&quot;       : Parent object,
  &quot;adopters&quot;     : Parent object array,
  &quot;state&quot;        : State object,
  &quot;focused&quot;      : boolean
}
</code>
</pre>
    </blockquote>
    <h3 id="elements">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            name
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Activity name. Must be unique for creator. Applies to both persistent and non-persistent Activities. The <a href="/reference/services/activity-manager.html#create">create</a> call will fail if this field is not unique unless the &quot;replace&quot; field is true.
          </td>
        </tr>
        <tr>
          <td>
            description
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Activity description.
          </td>
        </tr>
        <tr>
          <td>
            type
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#Type">Type</a>
          </td>
          <td>
            Indicates how the Activity is handled. Principally, it is used to denote the Activity as either foreground or background, and whether it can be paused or cancelled.
          </td>
        </tr>
        <tr>
          <td>
            requirements
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Requirements">Requirements</a>
          </td>
          <td>
            Conditions that must be met for Activity to run.
          </td>
        </tr>
        <tr>
          <td>
            schedule
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Schedule">Schedule</a>
          </td>
          <td>
            Time-based requirements for Activity.
          </td>
        </tr>
        <tr>
          <td>
            trigger
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Triggers">Trigger</a>
          </td>
          <td>
            Event that must occur for Acitivity to run.
          </td>
        </tr>
        <tr>
          <td>
            callback
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Callbacks">Callback</a>
          </td>
          <td>
            Call to invoke when Activity runs.
          </td>
        </tr>
        <tr>
          <td>
            metadata
          </td>
          <td>
            No
          </td>
          <td>
            any object
          </td>
          <td>
            Opaque object the Activity Manager stores and returns in the callback parameters. Can be retrieved with the list or <a href="/reference/services/activity-manager.html#getDetails">getDetails</a> method calls.
          </td>
        </tr>
        <tr>
          <td>
            activityId
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Activity ID.
          </td>
        </tr>
        <tr>
          <td>
            creator
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Parent">Parent</a>
          </td>
          <td>
            Activity creator.
          </td>
        </tr>
        <tr>
          <td>
            parent
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Parent">Parent</a>
          </td>
          <td>
            Activity parent.
          </td>
        </tr>
        <tr>
          <td>
            adopters
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#Parent">Parent</a> array
          </td>
          <td>
            Activity adopters.
          </td>
        </tr>
        <tr>
          <td>
            state
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#State">State</a>
          </td>
          <td>
            Activity state.
          </td>
        </tr>
        <tr>
          <td>
            focused
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Does Activity have focus flag.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <p>
      See <a href="/reference/services/activity-manager.html#create">create</a> method for examples of using an Activity object.
    </p>
    <p>
      <a name="ActivityEvent" id="ActivityEvent">&#160;</a>
    </p>
    <hr>
    <h2 id="activityevent">
      ActivityEvent
    </h2>Activity events are sent to all subscribed listeners. An event includes the event name and the Activity's ID and <a href="#State">state</a>. Apps or services can subscribe to an Activity through either the <a href="/reference/services/activity-manager.html#create">create</a>, <a href="/reference/services/activity-manager.html#adopt">adopt</a>, or <a href="/reference/services/activity-manager.html#monitor">monitor</a> methods.
    <h3 id="schema-1">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;activityId&quot; : int,
  &quot;event&quot;      : string, 
  &quot;state&quot;      : State
}
</code>
</pre>
    </blockquote>
    <h3 id="elements-1">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            activityId
          </td>
          <td>
            Yes
          </td>
          <td>
            int
          </td>
          <td>
            Activity ID.
          </td>
        </tr>
        <tr>
          <td>
            event
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Possible events listed in table below.
          </td>
        </tr>
        <tr>
          <td>
            state
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#State">State</a> object.
          </td>
          <td>
            Activity state - stopped, running, etc.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="possible-events">
      Possible Events
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Event
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <code>start</code>
          </td>
          <td>
            The Activity has permission to run and should proceed.
          </td>
        </tr>
        <tr>
          <td>
            <code>stop</code>
          </td>
          <td>
            The Activity should exit in an orderly fashion as soon as practically possible.
          </td>
        </tr>
        <tr>
          <td>
            <code>pause</code>
          </td>
          <td>
            The Activity should pause and wait to return to the run state.
          </td>
        </tr>
        <tr>
          <td>
            <code>cancel</code>
          </td>
          <td>
            The Activity is cancelled immediately.
          </td>
        </tr>
        <tr>
          <td>
            <code>orphan</code>
          </td>
          <td>
            Sent to a subscribed potential Activity parent (who registered with the adopt method) when the Activity's current parent closed or released the Activity.
          </td>
        </tr>
        <tr>
          <td>
            <code>adopted</code>
          </td>
          <td>
            After an Activity has been successfully adopted, this is sent to the Activity's previous parent in case they wish to unsubscribe.
          </td>
        </tr>
        <tr>
          <td>
            <code>focused</code>
          </td>
          <td>
            The Activity is now the focused foreground Activity.
          </td>
        </tr>
        <tr>
          <td>
            <code>unfocused</code>
          </td>
          <td>
            The Activity is no longer the focused foreground Activity.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;activityId&quot; : 629,
  &quot;event&quot;      : &quot;stop&quot;, 
  &quot;state&quot;      : {&quot;stopping&quot;}
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="CallbackProperty" id="CallbackProperty">&#160;</a>
    </p>
    <hr>
    <h2 id="activity-manager-callback-property">
      Activity Manager Callback Property
    </h2>
    <p>
      The Activity Manager inserts an additional property to the parameters specified for an Activity's callback method — &quot;$activity&quot;. This property contains additional trigger information.
    </p>
    <h3 id="schema-2">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;activityId&quot;   : int,
  &quot;name&quot;         : string,
  &quot;creator&quot;      : string,
  &quot;requirements&quot; : any,
  &quot;trigger&quot;      : string,
  &quot;metadata&quot;     : any,
  &quot;serial&quot;       : string
}
</code>
</pre>
    </blockquote>
    <h3 id="elements-2">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            activityId
          </td>
          <td>
            Yes
          </td>
          <td>
            int
          </td>
          <td>
            Acitivity ID.
          </td>
        </tr>
        <tr>
          <td>
            name
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Activity name.
          </td>
        </tr>
        <tr>
          <td>
            creator
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            ID of app or service that created Activity.
          </td>
        </tr>
        <tr>
          <td>
            requirements
          </td>
          <td>
            No
          </td>
          <td>
            any
          </td>
          <td>
            Map of <a href="#Requirements">requirements</a> fields to actual values that met the requirements specified. For example, if <code>minimumbandwidth</code> is specified, then a <code>minimumbandwidth</code> field is passed back indicating how much bandwidth there actually was when the requirement was met.
          </td>
        </tr>
        <tr>
          <td>
            trigger
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Reply that caused the Trigger to fire (if appropriate)
          </td>
        </tr>
        <tr>
          <td>
            metadata
          </td>
          <td>
            No
          </td>
          <td>
            any
          </td>
          <td>
            Opaque object passed by caller to the <a href="/reference/services/activity-manager.html#create">create</a> method.
          </td>
        </tr>
        <tr>
          <td>
            serial
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Random number assigned to each callback invocation.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example with Requirements</strong>
    </p>
    <p>
      Users may want to know the value that fulfilled a requirement, not just that the requirement was met. To satisfy this, the AM passes back information in the <code>requirements</code> field. The <code>requirements</code> property has the same name as the property used to specify the requirement. For example, if <code><a href="#Requirements">requirements</a></code> specified that the battery charge percentage had to be at least 50:
    </p>
    <pre>
<code>   &quot;requirements&quot;  : {
                       &quot;battery&quot; : 50
                     }
</code>
</pre>
    <p>
      Then, the information passed back to the callback would have a property of the same name indicating the current percentage:
    </p>
    <pre>
<code>    &quot;$activity&quot; : {
       &quot;activityId&quot; : 3,
       &quot;requirements&quot; : {
          &quot;battery&quot; : 75  // Requirement was met with this value
       }
    }
</code>
</pre>
    <p>
      <a name="Callbacks" id="Callbacks">&#160;</a>
    </p>
    <hr>
    <h2 id="callbacks">
      Callbacks
    </h2>
    <p>
      Callbacks allow a service to stop running and consuming resources while it waits for an Activity to start at a set time or for a trigger to fire. When the Activity begins, the callback is invoked and the service can resume. A callback specification consists of a method and any arguments. In addition to arguments, the callback is passed <a href="#CallbackProperty">Activity Manager Callback Property</a> information. Activities with a callback should be started immediately. The Activity Manager invokes the callback when the prerequisites are met and, in the case of a background/non-immediate Activity, it is cleared to run.
    </p>
    <h3 id="schema-3">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;method&quot; : string,
  &quot;params&quot; : any
}
</code>
</pre>
    </blockquote>
    <h3 id="elements-3">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            method
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Callback URI.
          </td>
        </tr>
        <tr>
          <td>
            params
          </td>
          <td>
            No
          </td>
          <td>
            any
          </td>
          <td>
            Any parameters to pass to the callback.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;method&quot;: &quot;palm://com.palm.connectionmanager/getStatus&quot;,
  &quot;params&quot;: {&quot;subscribe&quot;:true} 
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="Parent" id="Parent">&#160;</a>
    </p>
    <hr>
    <h2 id="parent">
      Parent
    </h2>
    <p>
      The Parent (or potential parent) of an Activity specified as an app ID or service ID. The Activity Manager automatically obtains this value when the app or service invokes the <a href="/reference/services/activity-manager.html#create">create</a> or <a href="/reference/services/activity-manager.html#adopt">adopt</a> method.
    </p>
    <h3 id="schema-4">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;appId&quot; : &quot;string&quot; | &quot;serviceId&quot; : &quot;string&quot;  // Either or
}
</code>
</pre>
    </blockquote>
    <h3 id="elements-4">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            appId
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Application ID. Either this or serviceId must be specified.
          </td>
        </tr>
        <tr>
          <td>
            serviceId
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Service ID. Either this or appId must be specified.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;appId&quot;: &quot;com.palm.google&quot;
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="Requirements" id="Requirements">&#160;</a>
    </p>
    <hr>
    <h2 id="requirements">
      Requirements
    </h2>
    <p>
      Conditions that must be met (i.e., telephony subsystem or network availability) before an Activity can run. A foreground Activity can run as soon as its conditions are met and, if a Trigger is specified, the Trigger has fired. Once a background Activity's requirements are met it can be ready to run but not actually running until needed resources are available and other running Activities have completed.
    </p>
    <p>
      In addition, no background Activity can run while the system is booting. The Activity Manager can stop launching background Activities, or pause or cancel currently running background Activities, if device temperature exceeds a critical threshold. Other conditions also determine if background Activities can run.
    </p>
    <p>
      When the Activity runs, the Activity Manager (for some particular requirements where this makes sense) can inform the service exactly <strong><em>how</em></strong> its requirements were met. This way, the service does not have to immediately query other services to determine how to proceed when starting Activity work. For example, for the &quot;internet&quot; requirement, the Activity Manager returns what interfaces are available and what addresses they have assigned to the service in the service's callback. This avoids having the service query the Connection Manager to bind to a particular interface.
    </p>
    <p>
      <strong>Requirements Update Notification</strong>
    </p>
    <p>
      The Activity Manager can generate &quot;update&quot; events when an Activity's requirement changes. To enable this, set the &quot;detailedEvents&quot; flag to true (in addition to setting &quot;subscribe&quot; to true) when calling <a href="/reference/services/activity-manager.html#create&quot;">create</a>, <a href="/reference/services/activity-manager.html#adopt">adopt</a>, or <a href="/reference/services/activity-manager.html#monitor">monitor</a>. All events generated to a subscription contain an <a href="#CallbackProperty">$activity</a> property  like the one initially provided to the Activity's callback method  which contains the current state of the Activity's requirements in the &quot;requirements&quot; sub-property.
    </p>
    <p>
      <strong>Note:</strong> All fields are optional.
    </p>
    <h3 id="schema-5">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;telephony&quot; : boolean,
  &quot;minimumbandwidth&quot; : int,
  &quot;wifi&quot;      : boolean,
  &quot;wan&quot;       : boolean,
  &quot;idle&quot;      : int,
  &quot;blanked&quot;   : int,
  &quot;battery&quot;   : int,
  &quot;charging&quot;  : boolean,
  &quot;docked&quot;    : boolean
}
</code>
</pre>
    </blockquote>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            telephony
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Is telephony available flag.
          </td>
        </tr>
        <tr>
          <td>
            minimumbandwidth
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Minimum bandwidth in kilobytes to run.
          </td>
        </tr>
        <tr>
          <td>
            wifi
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Is WiFi available flag.
          </td>
        </tr>
        <tr>
          <td>
            wan
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Is Wide-Area Network available flag.
          </td>
        </tr>
        <tr>
          <td>
            idle
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Idle time in seconds. <strong>Not currently implemented.</strong>
          </td>
        </tr>
        <tr>
          <td>
            blanked
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Time since screen blanked, in seconds. <strong>Not currently implemented.</strong>
          </td>
        </tr>
        <tr>
          <td>
            battery
          </td>
          <td>
            No
          </td>
          <td>
            int (0-100)
          </td>
          <td>
            Minimum battery charged percentage to run, 0-100.
          </td>
        </tr>
        <tr>
          <td>
            charging
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Should device be charging to run flag.
          </td>
        </tr>
        <tr>
          <td>
            docked
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Indicates Activity should only run when device is docked.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;wifi&quot;      : true,
  &quot;battery&quot;   : 60,
  &quot;charging&quot;  : true
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="Schedule" id="Schedule">&#160;</a>
    </p>
    <hr>
    <h2 id="schedule">
      Schedule
    </h2>
    <p>
      The Schedule object defines an Activity's time-based requirements. The time an Activity is scheduled to run can be either absolute or local. If a local time is specified, the Activity Manager watches for time zone changes and automatically adjusts the UTC time.
    </p>
    <p>
      <em>Smart Intervals</em>, specified with the interval field, allow tasks to be scheduled in evenly aligned batches, optimizing battery power and efficiency. Smart intervals are specified with the interval string field as &quot;##d##h##m##s&quot;. Days (d), hours (h), minutes (m) and seconds (s) must be specified in order, but any can be left out. The 24h Activity slot is aligned at a random point between midnight and 2am local time (determined each time the device boots) to avoid excessive server access at midnight. It is recommended you use this if a <em>precise interval</em> is not required. Smart intervals must be specified as an even multiple of days, 1, 3, 6, or 12 hour intervals and 5, 10, or 15 minute intervals. All tasks on the interval are aligned at approximately the same time.
    </p>
    <p>
      Starting can be delayed if additional <a href="#Requirements">Requirements</a> are specified, or if a <a href="#Triggers">Trigger</a> has yet to fire.
    </p>
    <p>
      Most scheduled Activities should be background Activities.
    </p>
    <p>
      <strong>Notes:</strong>
    </p>
    <ul>
      <li>All fields are optional though you must specify either start or interval.
      </li>
      <li>UTC time strings not ending in <code>Z</code> are interpreted as local time.
      </li>
    </ul>
    <h3 id="schema-6">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;precise&quot;  : boolean,
  &quot;start&quot;    : string,
  &quot;interval&quot; : string,
  &quot;skip&quot;     : boolean,
  &quot;local&quot;    : boolean,
  &quot;end&quot;      : string
}
</code>
</pre>
    </blockquote>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            precise
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Indicates the Interval occurs at the precisely specified start time, and every given interval thereafter.
          </td>
        </tr>
        <tr>
          <td>
            start
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Launch time. Time format is a subset of ISO 8601— &quot;YYYY-MM-DD HH:MM:SS&quot; (for local) or &quot;YYYY-MM-DD HH:MM:SSZ&quot; for <a href="http://www.nhc.noaa.gov/aboututc.shtml" target="_blank">UTC</a>.<br>
            This field is required for basic scheduled items, and optional for intervals. Launch time.
          </td>
        </tr>
        <tr>
          <td>
            interval
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Specifies the number of days, hours, minutes, and seconds— &quot;##d##h##m##s&quot;— between Activity execution. If set, then after an Activity is marked Complete, it is re-queued with a new start time. Days, hours, minutes and seconds must be specified in order, but any can be left out.
          </td>
        </tr>
        <tr>
          <td>
            skip
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            If an interval Activity is not able to run, i.e., the device was off when scheduled to start, it runs (by default) at the first opportunity. However, if <code>skip</code> is <code>true</code> it waits for the next scheduled interval time to occur before running.
          </td>
        </tr>
        <tr>
          <td>
            local
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Indicates that a date/time NOT ending in 'Z' is local. This will become unnecessary once times not ending in 'Z' are interpreted as local by default.
          </td>
        </tr>
        <tr>
          <td>
            end
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            End date/time for the interval.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Examples</strong>
    </p>
    <h4 id="simple-scheduled-item">
      Simple Scheduled Item
    </h4>
    <blockquote>
      <pre>
<code>{
  &quot;start&quot;    : &quot;2010-05-27 13:22:00&quot;,
  &quot;local&quot;    : true
}
</code>
</pre>
    </blockquote>
    <h4 id="smart-interval">
      Smart Interval
    </h4>
    <blockquote>
      <pre>
<code>{
  &quot;interval&quot; : &quot;10d20h30m20s&quot;
}
</code>
</pre>
    </blockquote>
    <h4 id="precise-interval">
      Precise Interval
    </h4>
    <blockquote>
      <pre>
<code>{
  &quot;precise&quot;  : true,
  &quot;start&quot;    : &quot;2010-07-20 14:22:00&quot;,
  &quot;interval&quot; : &quot;12d20h30m40s&quot;
  &quot;start&quot;    : &quot;2010-11-20 12:00:00&quot;,
  &quot;skip&quot;     : true,
  &quot;local&quot;    : true
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="State" id="State">&#160;</a>
    </p>
    <hr>
    <h2 id="state">
      State
    </h2>
    <p>
      Current Activity state.
    </p>
    <p>
      Note the following about Activity state:
    </p>
    <ul>
      <li>
        <p>
          When created, Activities are in the &quot;init&quot; state. Once the Activity's associations and initial app and service subscriptions are in place, it is issued a start command.
        </p>
      </li>
      <li>
        <p>
          If an Activity has a <a href="#Triggers">trigger</a>, or has a scheduled start time specified with a <a href="#Schedule">schedule</a> parameter, it enters the &quot;waiting&quot; state.
        </p>
      </li>
      <li>
        <p>
          Once an Activity's Trigger fires, or the Activity reaches its scheduled start time, the Activity exits the &quot;waiting&quot; state.
        </p>
      </li>
      <li>
        <p>
          If the Activity has <a href="#Requirements">requirements</a> that must be met before it can run and they are not, the Activity enters the &quot;blocked&quot; state until they are and it is eligible to run.
        </p>
      </li>
      <li>
        <p>
          Foreground Activities immediately enter the &quot;running&quot; state, while Background Activities enter the &quot;queued&quot; state until needed resources to run become available.
        </p>
      </li>
      <li>
        <p>
          Activities can transition back and forth between the &quot;queued&quot; and &quot;blocked&quot; states depending on whether the system can provide their specified requirements.
        </p>
      </li>
      <li>
        <p>
          When an Activity enters the &quot;running&quot; state, all subscribers receive the &quot;start&quot; event, and the callback method, if present, is called.
        </p>
      </li>
    </ul>
    <h3 id="schema-7">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;init&quot; | &quot;waiting&quot; | &quot;blocked&quot; | &quot;queued&quot; | &quot;running&quot; | &quot;paused&quot; |
  &quot;cancelling&quot; | &quot;cancelled&quot; | &quot;stopping&quot; | &quot;stopped&quot; | &quot;complete&quot;
}
</code>
</pre>
    </blockquote>
    <table border="1">
      <thead>
        <tr>
          <th>
            State
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <code>init</code>
          </td>
          <td>
            Activity has been created and is waiting for Activity's associations and initial app and service subscriptions to be in place
          </td>
        </tr>
        <tr>
          <td>
            <code>waiting</code>
          </td>
          <td>
            Activity is waiting for a trigger to fire or its scheduled time to begin running.
          </td>
        </tr>
        <tr>
          <td>
            <code>blocked</code>
          </td>
          <td>
            Activity is waiting for its specified Requirements to be met.
          </td>
        </tr>
        <tr>
          <td>
            <code>queued</code>
          </td>
          <td>
            The Activity is queued and ready to run.
          </td>
        </tr>
        <tr>
          <td>
            <code>running</code>
          </td>
          <td>
            The Activity is running.
          </td>
        </tr>
        <tr>
          <td>
            <code>pause</code>
          </td>
          <td>
            The Activity is paused.
          </td>
        </tr>
        <tr>
          <td>
            <code>cancelling</code>
          </td>
          <td>
            The Activity has been cancelled and waiting for potential adopters to take over as the parent.
          </td>
        </tr>
        <tr>
          <td>
            <code>cancelled</code>
          </td>
          <td>
            The Activity is cancelled.
          </td>
        </tr>
        <tr>
          <td>
            <code>stopping</code>
          </td>
          <td>
            The Activity is in the process of stopping.
          </td>
        </tr>
        <tr>
          <td>
            <code>stopped</code>
          </td>
          <td>
            The Activity has been stopped.
          </td>
        </tr>
        <tr>
          <td>
            <code>complete</code>
          </td>
          <td>
            The Activity is complete and has stopped.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <a name="Triggers" id="Triggers">&#160;</a>
    </p>
    <hr>
    <h2 id="triggers">
      Triggers
    </h2>
    <p>
      Activities with Triggers do not become runnable until an event occurs on a subscribed method. In addition, other <a href="#Requirements">requirements</a> or <a href="#Schedule">scheduling</a> constraints may also need to be met before the Activity is runnable. When the Activity starts, the specified method is called with &quot;subscribe=true&quot;, and any additional arguments the Activity creator provides. If another Activity has previously been created and started with an identical Trigger (the same method and arguments) then the Activity Manager may utilize its existing subscription to monitor for the Triggering event, unless &quot;unique&quot; is true in the Trigger specification.
    </p>
    <p>
      If the Trigger specification includes a <code>key</code> property, the Activity Manager looks for responses to<br>
      the Trigger method call that include the named <code>key</code> property. The Trigger fires when a response with that property is seen (including the initial response). The Trigger also fires if the Trigger method returns an error result—either the initial call result or any subsequent results. If a <code>key</code> property is not specified, the Trigger fires on the first response after the initial successful response.
    </p>
    <p>
      An example of a key property would be the &quot;fired&quot; property that db8 returns in a notification that <em>watched</em> query results have changed.
    </p>
    <p>
      Triggers are not &quot;persistent subscriptions&quot;. The Trigger is unsubscribed after the response which causes it to fire is seen.
    </p>
    <p>
      The Trigger fires on any error return result. Once it fires, the Trigger is unsubscribed. If a new Trigger is desired, your app should create a new Activity. When a subscription generates an event, the data is passed to the callback method as the &quot;trigger&quot; of the <a href="#CallbackProperty">Activity Manager Callback Property</a> that the Activity Manager adds to callbacks.
    </p>
    <p>
      <strong>WARNING</strong>
    </p>
    <p>
      Do <strong>NOT</strong> ignore the trigger information returned in a callback. If an error is returned to the method specified for a Trigger, then the Trigger fires immediately. This could happen if, for example, the parameters passed to the method were invalid or wrong. If the Trigger callback re-starts the Activity, i.e., in the case of a db8 watch, then the potential exists for an infinite loop. CHECK FOR ERRORS.
    </p>
    <h3 id="schema-8">
      Schema
    </h3>
    <p>
      Note: All fields are optional except &quot;method&quot;.
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;method&quot; : string,
  &quot;key&quot;    : string,
  &quot;params&quot; : any,
  &quot;where&quot;  : string or array of strings
}
</code>
</pre>
    </blockquote>
    <p>
      See the <a href="/dev-guide/mojo/db8.html">db8 documentation</a> for <a href="/reference/data-types/db8.html#where">where</a> clause specification.
    </p>
    <h3 id="elements-5">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            method
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Name of callback method.
          </td>
        </tr>
        <tr>
          <td>
            key
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Key property name. Activity Manager looks for this field in callback response, i.e., &quot;fired&quot; from db8 watch where query results have changed.
          </td>
        </tr>
        <tr>
          <td>
            params
          </td>
          <td>
            No
          </td>
          <td>
            any
          </td>
          <td>
            Parameters for subscription or watch.
          </td>
        </tr>
        <tr>
          <td>
            where
          </td>
          <td>
            No
          </td>
          <td>
            string or array of strings
          </td>
          <td>
            Single db8 where clause or array of db8 where clauses.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Examples</strong>
    </p>
    <p>
      <strong>Example 1</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;method&quot; : &quot;palm://com.palm.connectionmanager/getStatus&quot;,  // Device status service
  &quot;params&quot; : {&quot;subscribe&quot;:true}
}
</code>
</pre>
    </blockquote>
    <p>
      <strong>Example 2</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;method&quot; :  &quot;palm://com.palm.telephony/phoneNumberQuery&quot;,
  &quot;params&quot; :  { &quot;subscribe&quot; : true },
  &quot;where&quot; :   {
      &quot;prop&quot; : [ &quot;extended&quot;, &quot;number&quot; ],
      &quot;op&quot;   : &quot;!=&quot;,
      &quot;val&quot;  : &quot;14155551212&quot;
  }
}
</code>
</pre>
    </blockquote>
    <p>
      <strong>Example Response to Callback</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;errorCode&quot; : 0,
  &quot;errorString&quot; : &quot;success&quot;,
  &quot;extended&quot; : {
      &quot;number&quot; : &quot;14155551212&quot;
  },
  &quot;returnValue&quot; : true,
  &quot;subscribed&quot; : true
}
</code>
</pre>
    </blockquote>
    <p>
      <a name="Type" id="Type">&#160;</a>
    </p>
    <hr>
    <h2 id="type">
      Type
    </h2>
    <p>
      Indicates how the Activity is handled. Principally, it is used to denote the Activity as either foreground or background, and whether it can be paused or cancelled.
    </p>
    <h3 id="foreground-or-background">
      Foreground or Background
    </h3>
    <p>
      Default attributes are associated with background and foreground Activities:
    </p>
    <ul>
      <li>
        <strong>Foreground Activities</strong> are <em>high</em> priority and <em>immediate</em>— They cannot be queued and begin running when their prerequisites are met.
      </li>
      <li>
        <strong>Background Activities</strong> are <em>low</em> priority and not <em>immediate</em>—They are runnable, but queued until necessary resources become available.
      </li>
    </ul>
    <p>
      Whether an activity is foreground or background should only be set once. The default is foreground. If your app specifies foreground or background, do <strong>NOT</strong> set the advanced attributes (<em>immediate</em> and <em>priority</em>). If you set them, thee Activity Manager will NOT create the Activity. If you do not set either foreground or background, then you MUST set &quot;immediate&quot; and &quot;priority&quot;.
    </p>
    <h3 id="priority">
      Priority
    </h3>
    <p>
      Use &quot;high&quot; or &quot;highest&quot; priority if your Activity is performance critical, for example: 3D games, where failing to keep up with the desired frame rate is dramatically noticeable. Normal interactive UI Activities should use &quot;normal&quot;. If immediate display is not critical to your app, say, for example, an email sync, &quot;low&quot; priority is appropriate since the user does not necessarily expect email to show up immediately when they hit the 'sync' button, so a little extra time is not a problem. In addition, the delay only happens if the device has other things to do; if your Activity is the only thing running, it gets all the CPU it needs.
    </p>
    <h3 id="probe-activity">
      Probe Activity
    </h3>
    <p>
      As indicated with the &quot;probe&quot; flag, a <em>probe</em> Activity is one that does not impact resources, allowing many to run in parallel, rather than serially. You can use this in cases where more complex logic is required to determine if an Activity can proceed. Schedule the probe Activity to determine if the more heavy-weight Activity should proceed, and, if so, schedule the heavy-weight Activity with the Activity Manager and conclude the probe. For example, an email syncing app or service may first want to see if there is email to sync. Let's say there are 10 email accounts. The setup, login negotiation, and waiting for the server to respond might take 15-30 seconds. If done in sequence, it would take 5 minutes to discover if there was email to sync on all the accounts. Most of this involves waiting, so there is minimal CPU involved. It is also likely to be implemented in the same few services, so, in terms of memory use, doing five is probably as expensive as doing one. In this case, it is better to run them in parallel, find out which accounts had mail to sync, and then create new background Activities specifically to sync each account with mail.
    </p>
    <p>
      <a name="persist" id="persist">&#160;</a>
    </p>
    <h3 id="persistent-activity">
      Persistent Activity
    </h3>
    <p>
      If &quot;persist&quot; is true, the Activity continues across device reboots. These Activities are atomically updated and re-scheduled across version updates and device or services crashes. However, note that the Activity Manager does not have any visibility into what your activity is actually doing, so if your app is in the middle of doing something in response to a fired activity, the Activity Manager has no awareness of that. In other words, the state of an activity, such as &quot;paused&quot;, is not saved; instead, what happens is that activity specifications are reloaded as if you had just called &quot;create&quot; for it.
    </p>
    <p>
      <a name="explicit" id="explicit">&#160;</a>
    </p>
    <h3 id="explicit-activity">
      Explicit Activity
    </h3>
    <p>
      If &quot;explicit&quot; is true, the Activity can only be terminated with a <a href="/reference/services/activity-manager.html#stop">stop</a>, <a href="/reference/services/activity-manager.html#cancel">cancel</a>, or <a href="/reference/services/activity-manager.html#complete">complete</a> call. If the parent of an explicit Activity unsubscribes, and no other adopter is available, then, instead of being cancelled (the default), the Activity is moved back to the ready state and its callback is invoked.
    </p>
    <h3 id="schema-9">
      Schema
    </h3>
    <p>
      Note: All fields are optional, but if you do not set &quot;foreground&quot; or &quot;background&quot;, then you must set &quot;immediate&quot; and &quot;priority&quot;.
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;foreground&quot; | &quot;background&quot; : boolean |
  &quot;immediate&quot;     : boolean,
  &quot;priority&quot;      : string,
  &quot;userInitiated&quot; : boolean,
  &quot;pausable&quot;      : boolean,
  &quot;cancellable&quot;   : boolean,
  &quot;probe&quot;         : boolean,
  &quot;persist&quot;       : boolean,
  &quot;explicit&quot;      : boolean,
  &quot;continuous&quot;    : boolean,
  &quot;power&quot;         : boolean,
  &quot;powerDebounce&quot; : boolean
}
</code>
</pre>
    </blockquote>
    <h3 id="elements-6">
      Elements
    </h3>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            foreground
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity runs in the foreground and starts running when its prerequisites are met. Set either this or <span class="inline_code">background</span>, or <span class="inline_code">immediate</span> and <span class="inline_code">priority</span>.
          </td>
        </tr>
        <tr>
          <td>
            background
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity runs in the background. When its prerequisites are met it's placed into a ready queue and runs as system resources allow. Set either this or <span class="inline_code">foreground</span>, or <span class="inline_code">immediate</span> and <span class="inline_code">priority</span>.
          </td>
        </tr>
        <tr>
          <td>
            immediate
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity should run immediately. Set either this and <span class="inline_code">priority</span>, or <span class="inline_code">background</span> or <span class="inline_code">foreground</span>.
          </td>
        </tr>
        <tr>
          <td>
            priority
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Indicates Activity's priority. Must be one of the following: &quot;highest&quot;, &quot;high&quot;, &quot;normal&quot;, &quot;low&quot;, or &quot;lowest&quot;. Set either this and <span class="inline_code">immediate</span>, or <span class="inline_code">background</span> or <span class="inline_code">foreground</span>.
          </td>
        </tr>
        <tr>
          <td>
            userInitiated
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Not currently used.
          </td>
        </tr>
        <tr>
          <td>
            pausable
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity subscribers are prepared to handle pause event.
          </td>
        </tr>
        <tr>
          <td>
            cancellable
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity subscribers are prepared to handle cancel event.
          </td>
        </tr>
        <tr>
          <td>
            probe
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Short duration Activity using minimal resources that determines if another Activity should be scheduled.
          </td>
        </tr>
        <tr>
          <td>
            persist
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Store Activity state in db8 so it can span reboots, loss of service, or updates.
          </td>
        </tr>
        <tr>
          <td>
            explicit
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity is restarted unless terminated with <a href="/reference/services/activity-manager.html#complete">complete</a>, <a href="/reference/services/activity-manager.html#stop">stop</a>, or <a href="/reference/services/activity-manager.html#cancel">cancel</a>.
          </td>
        </tr>
        <tr>
          <td>
            continuous
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity does not have a well defined ending point and could run indefinitely.
          </td>
        </tr>
        <tr>
          <td>
            power
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Activity requires device remain powered while it is running.
          </td>
        </tr>
        <tr>
          <td>
            powerDebounce
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Events associated with this Activity are due to complete shortly. Set this flag to keep the device from having to suspend/restart in the meantime.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;foreground&quot;    : true,
  &quot;userInitiated&quot; : false,
  &quot;pausable&quot;      : true,
  &quot;cancellable&quot;   : true,
  &quot;probe&quot;         : false,
  &quot;persist&quot;       : true,
  &quot;explicit&quot;      : true,
  &quot;continuous&quot;    : true,
  &quot;power&quot;         : false,
  &quot;powerDebounce&quot; : false
}
</code>
</pre>
    </blockquote>
		</div>
	</body>
</html>